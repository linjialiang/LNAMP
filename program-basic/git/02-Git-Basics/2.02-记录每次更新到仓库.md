# 记录每次更新到仓库

> 现在我们手上有了一个真实项目的 `Git 仓库` ，并从这个仓库中取出了所有文件的工作拷贝。接下来，对这些文件文件做些修改，在完成了一个阶段的目标之后，提交本次更新到仓库。
> 请记住，你工作目录下的每一个文件都不外乎2种属性： `已跟踪文件` 或 `未跟踪文件` 。
>
> -   `已跟踪文件` ：已跟踪的文件是指那些被纳入了版本控制的文件，在上一次快照中有它们的几率，在工作一段时间后，他们的状态可能处于这 3 种状态： `未修改` 、 `已修改` 、 `已存存放入暂存区`
> -   `未跟踪文件` ：工作目录中除了已跟踪文件以外的所有其他文件都属于未跟踪文件，它们既不存在与上次快照的记录中，也没有放入暂存区。
> -   初次克隆某个仓库的时候，工作目录中的所有文件都属于 `已跟踪文件` ，并处于未修改状态。
> -   如果是在空白目录或已有项目上，通过 `git init` 指令创建仓库，所有新建文件或已有文讲都属于 `未跟踪文件` ，和克隆过来的刚好相反

## 如何检测当前文件状态？

> 在写项目的时候，我们需要一次次提交文件，我们就会遇到这个问题，如何查看项目文件所处于的状态？
>
> -   使用指令 `git status` 命令，可以查看项目文件处于睡眠状态

1.  如果在克隆仓库后立即使用此命令，会看到类似这样的输出：
```shell
$ git status
On branch master
nothing to commit, working directory clean
```

> 说明现在的工作目录相当干净：
>
> 1. 所有已跟踪文件在上次提交后都未被更改过
> 2. 此外当前目录下没有出现任何处于未跟踪状态的新文件
> 3. 当前所在分支名是 `master` （master 是 Git 的默认分支名）,并且与远程对应的分支没有偏离！

2.  如果在已有项目上新建的仓库，立即使用此命令，会看到类似这样的输出：
```shell
$ git status
On branch master

No commits yet

Untracked files:
  (use "git add <file>..." to include in what will be committed)

        README.md
        program-basic/
        program-language/
        program-other/

nothing added to commit but untracked files present (use "git add" to track)
```

> - `On branch master` 说明当前所在分支名是 `master`
> - `No commits yet` 说明文件该项目从未提交过
> - `Untancked files:` 列出了项目当前类别下未跟踪的文件名及子目录名，并且告诉我们使用 `git add <file> ...` 跟踪新文件的方法。

3.  如果在空白目录中新建仓库，立即使用此命令。会看到类似这样的输出：
```shell
$ git status
On branch master

No commits yet

nothing to commit (create/copy files and use "git add" to track)
```

> - 该输出与上面的类似，只是因为是空白目录，并没有未跟踪的文件及子目录

## 跟踪新文件
> 使用命令 `git add README.md` 开始跟踪一个文件，并使用 `git status` 来查看状态
> - `git status` 查看工作目录当前列表下所有文件及子目录的状态
> - `git status <file>...` 查看工作目录指定的个别文件或子目录的状态

```shell
$ git add README.md
...
$ git status
On branch master

No commits yet

Changes to be committed:
  (use "git rm --cached <file>..." to unstage)

        new file:   README.md

Untracked files:
  (use "git add <file>..." to include in what will be committed)

        program-basic/
        program-language/
        program-other/
```

> 这里又出现了一些新知识点
> - `Changes to be committed:` 说明该项目出现了 `已跟踪文件` ，并且处于已暂存状态；
> - 为了担心我们这次操作是失误，紧接着 `Git` 又告诉我们可以通过 `git rm --cached README.md` 指令将 `README.md` 从已暂存区域移除（因为我们从未提交（git commit）过该文件， 从已暂存区域移除后相当于重新回到了 `未跟踪状态`）
> - `new file:   README.md` 说明 `README.md` 文件是新增加到 `已跟踪文件` 的（之前属于 `未跟踪文件` ）

## 暂存已修改文件
> 现在我们来修改一个已被跟踪的文件，就用本小节文件来做测试。
> - 由于我们这个项目很多文件名都是中文命名的，会出现乱码的现象，下面我们就先来解决 `Git` 中文乱码问题（并不是乱码，只是被 quote 了）

### 如何处理 `Git` 中文乱码（被 quote）
> 假乱码的出现，是因为 git 对 0x80 以上的字符进行 quote ，只需要执行下面这段代码即可

```shell
$ git config --global core.quotepath = false
```

# 撤销操作
> 本小节内容在 `2.02-*.md` 里已经大致讲解过，学习起来不会有难度，大家过一遍即可

## 为什么我们要为 `撤销操作` 重新写一个小节呢？
> - 在任何一个阶段，我们都有可能撤销某些操作，并且在 `Git` 有几个撤销操作时不可逆
> - 这是在使用 `Git` 的过程中，会因为操作失误而导致之前的工作丢失
> - 这是 `Git` 稍有的会导致数据无法恢复的地方，所以我们需要进一步的讲解！

## `git commit --amend` 尝试重新提交
> 我们 `git commit` 完后，发现有几个文件漏掉了，这几个文件并未 `git add` ，这时候可以运行 `git commit --amend` 命令尝试重新提交！
> - 举例：提交前忘记了暂存 `2.04-*.md` 文件，可以这样操作
> - 注意：这种操作，会将之前的提交快照会覆盖掉！

```shell
$ git add 2.04-撤销操作.md
$ git commit -m '第 1 次提交 2.04-*.md'
$ git add 2.04-撤销操作.md
$ git commit -m '第 2 次提交 2.04-*.md'
$ git log -2
commit 7b98f3469a2095ed85fa378c2353e37a5a735060 (HEAD -> master)
Author: madnesslin <linjialiang@163.com>
Date:   Mon Apr 23 16:26:19 2018 +0800

    第 2 次提交 2.04-*.md

commit 31ee113e4b4a51c1590df854c59d95e60e50e1d8
Author: madnesslin <linjialiang@163.com>
Date:   Mon Apr 23 16:24:01 2018 +0800

    第 1 次提交 2.04-*.md
```

```shell
$ git add 2.04-撤销操作.md
$ git commit --amend
$ git log -2
commit 0a7d9bc8b6350745c51e4f10ede0b2090e61ec09 (HEAD -> master)
Author: madnesslin <linjialiang@163.com>
Date:   Mon Apr 23 16:26:19 2018 +0800

    第 3 次提交 2.04-*.md！但是使用了 --amend ，第2次提交被覆盖！

commit 31ee113e4b4a51c1590df854c59d95e60e50e1d8
Author: madnesslin <linjialiang@163.com>
Date:   Mon Apr 23 16:24:01 2018 +0800

    第 1 次提交 2.04-*.md

```

## `git reset HEAD <file>...` 取消暂存文件
> 这个命令之前已经讲过，就不举例了，今后我们需要注意几点：
> - `git reset` 并不危险，但是 `git reset --hard` 是危险的，加上了 `--hard` 就很有可能将你当前工作目录中所有进度丢失！
> - `git reset` 会将当前文件的修改覆盖掉，这是不可恢复的！

## `git checkout -- [file]` 撤销对文件的修改
> 如果你不想保留对文件的修改，如何才能将它还原成上次提交的样子呢？使用 `git checkout -- [file]` 就可以，但是这是非常危险的操作
> - 出飞你确实清楚不想要这个文件了，否则不要使用这个命令
> - 执行该命令，相关于拷贝了另一个文件来覆盖它，这是不非常危险的！！！

## 关于 `Git` 中的不可逆操作解释
> 在 `Git` 中任何 `已提交` 的东西几乎都是可以恢复的，甚至前面提到的使用 `--amend` 选项覆盖的提交也可以恢复（后续讲解），然而，请注意了：任何你未提交的东西丢失后很可能再也无法找回！！！

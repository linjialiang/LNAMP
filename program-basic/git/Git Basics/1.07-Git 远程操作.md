# Git 远程操作

> 本小节会涉及到的知识点：
>
> -   从远程仓库抓取数据
> -   向远程仓库推送数据
> -   `git pull` 遇到的合并冲突解决

## 从远程仓库抓取数据

> - `git fetch` 用于抓取数据
> - `git pull` 指令用于抓取+合并数据

### 1. 抓取数据-克隆现有的仓库

> 可以直接使用 `git pull` 抓取数据：

```shell
$ git pull
Already up to date.
```

### 2. 抓取数据-在现有目录中初始化仓库

> 本地仓库是从已有项目通过 `git init` 指令直接初始化的
>
> -   所以和远程仓库是相互独立的 2 个项目，我们需要解决如何合并两个独立的项目！

-   合并两个独立的项目

    > `git pull <remote-name>/<branch|tag> <local-branch> --allow-unrelated-histories` 指令用来合并 2 个独立的项目
    >
    > -   默认情况下，git merge命令拒绝合并不共享祖先的历史记录。当合并两个独立开始的项目的历史时， `git pull` 可以使用 `--allow-unrelated-histories` 选项来覆盖此安全性。

    ```shell
    $ git pull github-git master --allow-unrelated-histories
    From https://github.com/linjialiang/git
     * branch            master     -> FETCH_HEAD
    Merge made by the 'recursive' strategy.
     LICENSE | 201 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
     1 file changed, 201 insertions(+)
     create mode 100644 LICENSE
    ```

## 向远程仓库推送数据

> `git push` 是向远程推送数据的指令

### 1. 推送数据-克隆现有的仓库

> 直接使用 `git push`

```shell
$git push
Everything up-to-date
```

### 2. 推送数据-在现有目录中初始化仓库

> 使用 `git push <remote-name> <local-branch>:<remote-branch>`

```shell
$ git push github-git master:master
Counting objects: 160, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (159/159), done.
Writing objects: 100% (160/160), 26.23 KiB | 1.25 MiB/s, done.
Total 160 (delta 72), reused 0 (delta 0)
remote: Resolving deltas: 100% (72/72), done.
To https://github.com/linjialiang/git.git
   5b1f698..b407d71  master -> master
```

## 便捷的指令：

1.  “本地分支”如何跟踪“远程分支”？

    > “在现有目录中初始化仓库”和远程交互的时代码很繁琐，能不能简写呢？
    >
    > - 指令： `git branch --set-upstream-to=<remote-name>/<branch> <local-branch>` ，如果远程没有改分支会自动创建分支，并推送数据

    ```shell
    $ git branch --set-upstream-to=github-git/master master
    Branch 'master' set up to track remote branch 'master' from 'github-git'.
    ```

    > 跟踪后 `git push` `git pull` 就不必加上 `指定的远程仓库url简写` 及其 `指定的远程分支`！

    ```shell
    $ git push
    Everything up-to-date

    $ git pull
    Already up to date.
    ```

    > 到此“在现有目录中初始化仓库”和“克隆现有的仓库”已经没有太大区别了

2.  “本地分支”如何取消对“远程分支”的跟踪？

    > `$ git branch --unset-upstream <local-branch>` 指令可以取消跟踪

    ```shell
    $ git branch --unset-upstream master
    ```

    > 删除后 `git pull` `git push` 需要带上 `指定的远程仓库url简写` 及其 `指定的远程分支`

    ```shell
    $ git pull
    There is no tracking information for the current branch.
    Please specify which branch you want to merge with.
    See git-pull(1) for details.

        git pull <remote> <branch>

    If you wish to set tracking information for this branch you can do so with:

        git branch --set-upstream-to=github-git/<branch> master
    ```

    ```shell
    $ git pull github-git master
    From https://github.com/linjialiang/git
     * branch            master     -> FETCH_HEAD
    Already up to date.
    ```

## 合并冲突

> 如果远程做了修改，本地也做了修改，就会遇到下面的问题：
>
> -   直接 `git push` 会报错，需要先 `git pull`
> -   在 `git pull` 的时候可能就会出现冲突，假如出现需要合并冲突的问题：

```shell
<<<<<<< HEAD
\`\`\`shell

\`\`\`
=======
2. 将分支2合并到分支1
> 在远程我们也做了修改 在远程我们也做了修改
>>>>>>> 73610a4f34b2819366860f53c1572fcb4522eb34
```

> 上面的代码就是在告诉我们遇到了冲突，并且告诉我们需要手动处理的代码
> - 手动处理结束后，使用 `git add` `git commit` 最终将合并的信息提交上去！

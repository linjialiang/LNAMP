# 分支管理

> 现在已经创建、合并、删除了一些分支，让我们看看一些常用的分支管理工具

## 继上一小节的内容，我们需要做下准备

> 切换回 `dev3` 分支后，我们应该先要合并下 `master`，防止 `master` 分支上有内容修改，二 `dev3` 还未合并过来

```shell
$ git merge master
Updating e698f90..acf4c9c
Fast-forward
 program-basic/git/02-Git-Basics/2.06-为 Git 打标签.md | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)
```

> 有一个内容在master上修改，这个文件直接快进，并没有冲突，我们不需要自行解决合并冲突问题！

## 关于 `git branch`

### 查看分支

> `git branch` 命令不只是可以创建于删除分支。如果不加任何参数运行它，会得到当前所有分支的一个列表：

```shell
$ git branch
  dev2
* dev3
  master
```

> 如果加上 `--remotes` 会显示所有远程分支

```shell
$ git branch --remotes
  github-programmer/dev2
  github-programmer/dev3
  github-programmer/master
```

> 假如加上 `--all` 会列出所有本地分支和远程分支

```shell
$ git branch --all
  dev2
* dev3
  master
  remotes/github-programmer/dev2
  remotes/github-programmer/dev3
  remotes/github-programmer/master
```

> 注意 `dev3` 分支前的 <font color=red>\*</font> 字符，代表现在检出的那一个分支是 `dev3`
>
> -   也就是说,当前 `HEAD` 指针所指向的分支是 `dev3`，这意味着如果在这时候提交 `dev3` 分支将会随着新的工作向前移动。


### 查看分支最后一次提交
> `git branch --verbose` 命令，可以查看分支的最后一次提交

```shell
$ git branch --verbose
  dev2   cfef62f [gone] Update atom 简明手册.md
* dev3   b7ba153 提交了 */git/*/3.02-*.md 和 */git/*/3.03-*.md
  master b7ba153 提交了 */git/*/3.02-*.md 和 */git/*/3.03-*.md
```

> 如果要查看远程仓库各个分支的提交情况，需要加上 `--remotes`

```shell
$ git branch --remotes --verbose
  github-programmer/dev2   cfef62f Update atom 简明手册.md
  github-programmer/dev3   b7ba153 提交了 */git/*/3.02-*.md 和 */git/*/3.03-*.md
  github-programmer/master b7ba153 提交了 */git/*/3.02-*.md 和 */git/*/3.03-*.md
```

> 如果要查看本地分支和远程分支最后一次提交情况，需要加上 `--all`

```shell
$ git branch --all  --verbose
  dev2                             cfef62f [gone] Update atom 简明手册.md
* dev3                             b7ba153 提交了 */git/*/3.02-*.md 和 */git/*/3.03-*.md
  master                           b7ba153 提交了 */git/*/3.02-*.md 和 */git/*/3.03-*.md
  remotes/github-programmer/dev2   cfef62f Update atom 简明手册.md
  remotes/github-programmer/dev3   b7ba153 提交了 */git/*/3.02-*.md 和 */git/*/3.03-*.md
  remotes/github-programmer/master b7ba153 提交了 */git/*/3.02-*.md 和 */git/*/3.03-*.md
```

### 查看其它分支是否合并到其它分支
> `--merged` 和 `--no-merged` 这两个有用的选项可以过滤这个列表中已经合并或尚未合并到当前分支的分支。
> - 使用 `git branch --merged` 可以查看哪些分支合并到了当前分支

```shell
$ git branch --verbose
  dev2   cfef62f [gone] Update atom 简明手册.md
* dev3   b7ba153 提交了 */git/*/3.02-*.md 和 */git/*/3.03-*.md
  master b7ba153 提交了 */git/*/3.02-*.md 和 */git/*/3.03-*.md
```

> 注意：已经合并的分支（就是这里不带 \* 好的），我们可以使用 `git branch -d <branch-name>` 来删除这些删除
> - 当然要删除分支，应该去 `master` 去处理，因为我们需要保证这些分支的内容已经和 `master` 合并
> - 使用 `git branch --no=merged` 可以查看哪些包含了还未合并工作的分支

```shell
$ git branch --no-merged
```

> - 当然我们这里没有未合并分支，假如有的话，我们使用 `git branch --delete <branch-name>` 指令就会报错，当然我们也可以加上 `-D` 强制删除

```shell
$ git branch -D <branch-name>
```

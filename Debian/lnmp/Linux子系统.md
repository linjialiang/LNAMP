# Linux 子系统

> Windows 10 可以安装 Linux 子系统，官方也叫做 `分发` ，下面我做一个具体讲解！

- 提示：子系统下的进程也是 Windows10 下的单独进程。

## 安装 Linux 子系统

> windows 10 必须开启的功能：

![必须开启的功能](./../static/07/win10必须开启的功能.png)

> 接下来就可以去 win10 商店下载指定的分发版本，当然也可以使用 wsl 指令从 tar 中安装封装好的分发版本！

## `wsl.exe` 指令

| wsl 指令                                                       | 描述                            |
| -------------------------------------------------------------- | ------------------------------- |
| `wsl.exe -l --all`                                             | 列出所有分发                    |
| `wsl.exe -l --running`                                         | 仅列出当前正在运行的分发        |
| `wsl.exe -d <分发名>`                                          | 运行指定的分发                  |
| `wsl.exe -s <分发名>`                                          | 将分发设置为默认值              |
| `wsl.exe --unregister <分发名>`                                | 注销指定的分发（相当于卸载）    |
| `wsl.exe -t <分发名>`                                          | 终止指定的分发                  |
| `wsl.exe --export <分发名> <tar路径及文件名>`                  | 将分发导出到 tar 文件           |
| `wsl.exe --import <分发名> <分发的安装路径> <tar路径及文件名>` | 将指定的 tar 文件作为新分发导入 |

## lnmp 一键启停脚本

> Linux 子系统，不支持 systemctl 启动引导，因此我自己写了一个 lnmp 一键启停脚本

- 脚本源码

  > `lnmp 一键启停脚本`的源码请查看 [`init.d.lnmp.sh`](./source/init.d.lnmp.sh)

- 脚本路径

  > 将上述 `init.d.lnmp.sh` 脚本拷贝到 `/etc/init.d/` 目录下，并且重命名为 `lnmp`。

- 脚本权限

  > 脚本需要有执行权限，即： `chrom +x lnmp`

### 注意事项

- 想要脚本有效，必须满足脚本里的 service 指令有效。
- 提示：正确配置了 init.d 启动脚本，service 就会有效

### 启动脚本操作说明

> 由于只是开发环境，我就简单写了几个常用的选项：

| 描述         | 指令                     |
| ------------ | ------------------------ |
| 一键启动服务 | `/etc/init.d/lnmp start` |
| 一键停止服务 | `/etc/init.d/lnmp stop`  |

- 一键启动服务

  > 一键启动服务，启动了 4 个服务：

  | 序号 | 服务    |
  | ---- | ------- |
  | 01   | ssh     |
  | 02   | nginx   |
  | 03   | mysqld  |
  | 04   | php-fpm |

- 一键停止服务

  > 一键停止服务，停止了 3 个服务：

  | 序号 | 服务    |
  | ---- | ------- |
  | 01   | nginx   |
  | 02   | mysqld  |
  | 03   | php-fpm |

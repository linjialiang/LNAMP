# MariaDB 数据类型

> 数据类型是数据的一种属性，它可以决定数据的存储格式、有效范围和相应的限制。 MariaDB 的数据类型包括:

```shell
1. 整数类型
2. 浮点数类型（不如定点数精确）
3. 定点数类型
4. 日期和时间类型（建议用时间戳）
5. 字符串类型
6. 二进制数据类型（一般用不到）
```

## 一、整数类型

> 整数类型是数据库中最基本的数据类型，包括：

| 整数类型  | 字节数 | 有符号取值范围 | 无符号取值范围     |
| --------- | ------ | -------------- | ------------------ |
| tinyint   | 1      | 0 ~ `2^8-1`    | `-2^7` ~ `2^7-1`   |
| smallint  | 2      | 0 ~ `2^16-1`   | `-2^15` ~ `2^15-1` |
| mediumint | 3      | 0 ~ `2^24-1`   | `-2^23` ~ `2^23-1` |
| int       | 4      | 0 ~ `2^32-1`   | `-2^32` ~ `2^31-1` |
| integer   | 4      | 0 ~ `2^32-1`   | `-2^32` ~ `2^31-1` |
| bigint    | 8      | 0 ~ `2^64-1`   | `-2^63` ~ `2^63-1` |

## 二、浮点数和定点数类型

> MariaDB中使用浮点数和定点数类型来表示小数
>
> -   浮点数包括： `单精度浮点数（float型）` 和 `双精度浮点数（double型）`
> -   定点数类型就是： `decimal型`

| 浮点数类型   | 字节数 |
| ------------ | ------ |
| float        | 4      |
| double       | 8      |
| decimal(M,D) | M+2    |

> M是数据总长度，D是小数点后的长度

## 三、日期与时间类型

> 日期与时间类型是为了方便在数据库中存储日期和时间而设计的。MariaDB中有多种表示日期和时间的数据类型：

| 日期与时间类型 | 字节数 | 取值范围                                      | 零值                  |
| -------------- | ------ | --------------------------------------------- | --------------------- |
| year           | 1      | `1901` ~ `2155`                               | `0000`                |
| date           | 4      | `1000-01-01` ~ `9999-12-31`                   | `0000:00:00`          |
| time           | 3      | `-838:59:59` ~ `838:59:59`                    | `00:00:00`            |
| datetime       | 8      | `1000-01-01 00:00:00` ~ `9999-12-31 23:59:59` | `0000-00-00 00:00:00` |
| timestamp      | 4      | `19700101080001` ~ `20380119111407`           | `00000000000000`      |

## 四、字符串类型

> 字符串类型是在数据库中存储字符串的数据类型。字符串类型包括：

| 字符串类型 | 允许的长度 | 存储空间         |
| ---------- | ---------- | ---------------- |
| char       | `2^8-1`    | --               |
| varchar    | `2^16-1`   | --               |
| tinytext   | `2^8-1`    | 值的长度+2个字节 |
| text       | `2^16-1`   | 值的长度+2个字节 |
| mediumtext | `2^24-1`   | 值的长度+3个字节 |
| longtext   | `2^32-1`   | 值的长度+4个字节 |

> enum 和 set 类型

| 字符串类型 | 取值列表允许的个数 |     |
| ---------- | ------------------ | --- |
| enum       | `2^16-1`           | --  |
| set        | `2^4`              | --  |

## 五、二进制类型

> 二进制类型是在数据库中村粗话二进制数据的数据类型，二进制类型包括：

| 二进制类型   | 取值范围                                             |
| ------------ | ---------------------------------------------------- |
| binary(M)    | 字节数为M，允许长度为0~M的定长二进制字符串           |
| varbinary(M) | 允许长度为0~M的变长二进制字符串，字节数为值的长度加1 |
| bit(M)       | M位二进制数据，M最大值位64                           |
| tinyblob     | 可变长二进制数据，最多255个字节                      |
| blob         | 可变长二进制数据，最多（2^16-1）个字节               |
| mediumblob   | 可变长二进制数据，最多（2^24-1）个字节               |
| longblob     | 可变长二进制数据，最多（2^32-1）个字节               |

## 如何选择数据类型

> 在 MariaDB 中创建表时，需要考虑位字段选择哪种数据类型是最合适的。只有选择了合适的数据类型，才能提高数据库的效率。

1.  在实际应用场景中，我们很少会用到二进制类型的字段
2.  整型、定点数、字符串类型是会经常使用的
3.  整型和字符串类型应该根据实际需求进行选中用哪个

> 下表是一些建议

| 场景     | 使用类型      | 说明                         |
| -------- | ------------- | ---------------------------- |
| 自增id   | int           | 可达到十亿级别               |
| 金额     | decimal(12,2) | 可达千亿的天文数字           |
| 用户名   | char(20)      | 定长字符串                   |
| 昵称     | char(30)      | 定长字符串                   |
| 描述     | varchar(255)  | 长度可变字符串               |
| 文本内容 | varchar       | 能用varchar的地方不用text    |
| 日期     | int(10)       | 时间戳                       |
| 密码     | bigint        | 加密一般都大于10位数         |
| 小数字   | tinyint(1)    | 整型中占用空间最小的字段类型 |

> 整型中 `带符号` 和 `不带符号` 的区别

| 符号     | 说明                       |
| -------- | -------------------------- |
| 带符号   | 1个字节来处理 `+` `-` 符号 |
| 不带符号 | 不需要字节来处理符号       |

> `null` 与 `空值` 该如何选择

| 属性 | 区别               | 建议                     |
| ---- | ------------------ | ------------------------ |
| 空值 | 不需要字节来存储   | 尽量用空值，提高索引效率 |
| null | 需要字节要存储null | 能用空值，就不要用null   |

## 清空表后如何让表从1开始自增？
> 我们可能会遇到这样的情况：我们就算清空了数据库，但是自增的字段依然不会从1开始计数，使用下面的sql语句就可以解决了

```sql
truncate table `表名`;
```

> truncate 会清空数据表的所有资料，所以索引值也会冲新开始
